openapi: 3.0.4
info:
  title: iTrade API - Profile API
  description: |-
    Account Info,
    Update Email,
    Update Mobile,
    Upload Signature,
    Acknowledgement
  version: 0.0.1
servers:
  - url: http://localhost:8080/profile/api/v1
paths:
  /userInfo:
    get:
      summary: Get User Information
      operationId: getUserInformation
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserInfo'
        '400':
          description: Invalid Request
        '404':
          description: No Accounts Linked 
        '422':
          description: Validation exception
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - BearerAuth: []

  /trInfo:
    get:
      summary: Get TR Information
      operationId: getTRInformation
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TRInfo'
        '400':
          description: Invalid Request
        '404':
          description: No Accounts Linked 
        '422':
          description: Validation exception
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - BearerAuth: []
  /accounts:
    get:
      summary: Get User Account Information
      operationId: getUserAccounts
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/UserAccount'
        '400':
          description: Invalid Request
        '404':
          description: No Accounts Linked 
        '422':
          description: Validation exception
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - BearerAuth: []
  /tradingInfo:
    get:
      summary: Get User Trading Information
      operationId: getUserTradingInformation
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/TradingInfo'
        '400':
          description: Invalid Request
        '404':
          description: No Accounts Linked 
        '422':
          description: Validation exception
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - BearerAuth: []
  /tradingInfo/sip/products:
    get:
      tags:
      - SIP
      summary: Get SIP Product List
      operationId: getSIPProductList
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SIPProduct'
        '400':
          description: Invalid Request
        '404':
          description: No Accounts Linked 
        '422':
          description: Validation exception
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - BearerAuth: []
  /tradingInfo/sip/submission/{submissionId}:
    get:
      tags:
      - SIP
      summary: Get SIP Submission data
      operationId: getSIPSubmissionData
      parameters:
        - name: submissionId
          in: path
          description: Submission ID
          required: true
          schema:
            type: string
            example: 'ff8e95af194a4111bfae9527f1b6a051'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SIPSubmissionData'
        '400':
          description: Invalid Request
        '404':
          description: No Accounts Linked 
        '422':
          description: Validation exception
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - BearerAuth: []
  /tradingInfo/sip/submission:
    post:
      tags:
      - SIP
      summary: Post SIP Submission data
      operationId: postSIPSubmissionData
      requestBody:
        description: SIP Submission Data
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SIPSubmissionData'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SIPSubmissionResponse'
        '400':
          description: Invalid Request
        '404':
          description: No Accounts Linked 
        '422':
          description: Validation exception
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - BearerAuth: []
  /tradingInfo/bcan/request:
    post:
      summary: Post BCAN Request
      operationId: postBCANRequest
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BCANRequestResponse'
        '400':
          description: Invalid Request
        '404':
          description: No Accounts Linked 
        '422':
          description: Validation exception
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - BearerAuth: []
  /donation/plan:
    get:
      tags: 
        - Donation
      summary: Get all active donation plan
      operationId: getDonationPlan
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/DonationPlan'
        '400':
          description: Invalid Request
        '404':
          description: No Accounts Linked 
        '422':
          description: Validation exception
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - BearerAuth: []
  /donation/submission:
    post:
      tags: 
        - Donation
      summary: Post Donation Submission
      operationId: postDonation
      requestBody:
        description: Donation Submission
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DonationRequest'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BCANRequestResponse'
        '400':
          description: Invalid Request
        '404':
          description: No Accounts Linked 
        '422':
          description: Validation exception
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - BearerAuth: []
  /donation/cancel:
    post:
      tags: 
        - Donation
      summary: Post Donation Cancellation
      operationId: cancelDonation
      requestBody:
        description: Donation Cancellation
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/DonationCancelRequest'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BCANRequestResponse'
        '400':
          description: Invalid Request
        '404':
          description: No Accounts Linked 
        '422':
          description: Validation exception
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - BearerAuth: []
  /update/mobile/otp:
    post:
      tags:
        - UpdateInfo
      summary: Send SMS OTP to New Mobile Number
      operationId: UpdateMobileSendOTP
      requestBody:
        description: new mobile number
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateMobileOtpRequest'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateStepProfileResponse'
        '400':
          description: Invalid Request
        '404':
          description: No Accounts Linked 
        '422':
          description: Validation exception
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - BearerAuth: []
  /update/mobile/submit:
    post:
      tags:
        - UpdateInfo
      summary: To Submit update mobile number
      operationId: UpdateMobileSubmit
      requestBody:
        description: new mobile number
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProfileSubmitRequest'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BCANRequestResponse'
        '400':
          description: Invalid Request
        '404':
          description: No Accounts Linked 
        '422':
          description: Validation exception
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - BearerAuth: []
  /update/email/otp:
    post:
      tags:
        - UpdateInfo
      summary: Send OTP to New Email
      operationId: UpdateEmailSendOTP
      requestBody:
        description: new email address
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateEmailOtpRequest'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateStepProfileResponse'
        '400':
          description: Invalid Request
        '404':
          description: No Accounts Linked 
        '422':
          description: Validation exception
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - BearerAuth: []
  /update/email/submit:
    post:
      tags:
        - UpdateInfo
      summary: To Submit Update Email
      operationId: UpdateEmailSubmit
      requestBody:
        description: submit update email
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateProfileSubmitRequest'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BCANRequestResponse'
        '400':
          description: Invalid Request
        '404':
          description: No Accounts Linked 
        '422':
          description: Validation exception
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - BearerAuth: []
  /update/signature/upload:
    post:
      tags:
        - UpdateInfo
      summary: Upload new signature documents
      operationId: UploadSignatureFile
      requestBody:
        description: new singature image file
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary # Represents the file content
                  description: The file to upload
                metadata:
                  type: string
                  description: Additional metadata for the file
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UpdateStepProfileResponse'
        '400':
          description: Invalid Request
        '404':
          description: No Accounts Linked 
        '422':
          description: Validation exception
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - BearerAuth: []
  /update/singnature/submit:
    post:
      tags:
        - UpdateInfo
      summary: To Submit Update Signature
      operationId: UpdateSignatureSubmit
      requestBody:
        description: submit update Signature
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UpdateSingatureSubmitRequest'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/BCANRequestResponse'
        '400':
          description: Invalid Request
        '404':
          description: No Accounts Linked 
        '422':
          description: Validation exception
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - BearerAuth: []
  /acknowledgement/user/list:
    get:
      summary: Get user accepted acknowledgement list
      operationId: getUserAcknowledgement
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserAcknowledgement'
        '400':
          description: Invalid Request
        '404':
          description: No Accounts Linked 
        '422':
          description: Validation exception
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - BearerAuth: []
  /acknowledgement/user/details/{id}:
    get:
      summary: Get user accepted acknowledgement detail
      operationId: getUserAcknowledgementDetail
      parameters:
        - name: id
          in: path
          description: user accepted agreement ID
          required: true
          schema:
            type: string
            example: 'ff8e95af194a4111bfae9527f1b6a051'
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AcknowledgementDetails'
        '400':
          description: Invalid Request
        '404':
          description: No Accounts Linked 
        '422':
          description: Validation exception
        default:
          description: Unexpected error
          content:
            application/json:
              schema:
                $ref: "#/components/schemas/Error"
      security:
        - BearerAuth: []
components:
  schemas:
    Error:
      type: object
      properties:
        code:
          type: string
        message:
          type: string
      required:
        - code
        - message
    UserInfo:
      type: object
      description: User Information
      properties:
        userId:
          type: string
        userName:
          type: string
        userEmail:
          type: string
        userMobile:
          type: string
    TRInfo:
      type: object
      description: TR Information
      properties:
        trCode:
          type: string
        trName:
          type: string
        trContact:
          type: string
        trEmail:
          type: string
    UserAccount:
      type: object
      description: Account Information
      properties:
        accountNo:
          type: string
        accountType:
          type: string
        trName:
          type: string
        eps:
          type: string
        giro:
          type: string
        cdp:
          type: string
        cpf:
          type: string
        srs:
          type: string
        accreditedInvestor:
          type: string
    SIPInfo:
      type: object
      description: SIP Related Info
      properties:
        toDisplay:
          type: boolean
        isPassed:
          type: boolean
        dueForSubmission:
          type: boolean
        lastSubmissionID:
          type: string
    W8Ben:
      type: object
      description: W8Ben Related Info
      properties:
        toDisplay:
          type: boolean
        isJointAcct:
          type: boolean
        expireDate:
          type: string
          format: date
    CRS:
      type: object
      description: CRS Related Info
      properties:
        certified: 
          type: boolean
        isJointAcct:
          type: boolean
        validationDate:
          type: string
          format: date
    BCAN:
      type: object
      description: BCAN Related Info
      properties:
        toDisplay:
          type: boolean
        requestStatus:
          type: string
    TradingInfo:
      type: object
      description: User Trading Information
      properties:
        sip:
          $ref: "#/components/schemas/SIPInfo"
        w8ben:
          $ref: "#/components/schemas/W8Ben"
        crs:
          $ref: "#/components/schemas/CRS"
        bcan:
          $ref: "#/components/schemas/BCAN"
    SIPProduct:
      type: object
      description: SIP Product
      properties:
        productId:
          type: number
          format: int32
        productName:
          type: string
    SIPSubmissionData:
      type: object
      description: SIP Submission Data
      properties:
        twoFAData:
          type: string
        isCAR:
          type: boolean
        carProduct:
          type: array
          items:
            type: number
            format: int32
        isCKA:
          type: boolean
        ckaCFD:
          type: boolean
        ckaFX:
          type: boolean
        ckaSP:
          type: boolean
        ckaUT:
          type: boolean
    SIPSubmissionResponse:
      type: object
      properties:
        submissionId:
          type: string
    BCANRequestResponse:
      type: object
      properties:
        isSuccess:
          type: boolean
    DonationPlan:
      type: object
      properties:
        id:
          type: number
          format: int32
        currency:
          type: string
        amount:
          type: number
        start:
          type: string
          format: date
        end:
          type: string
          format: date
    DonationRequest:
      type: object
      properties:
        accountNo:
          type: string
        amount:
          type: number
        currency:
          type: string
        paymentMethod:
          type: string
        paymentMode:
          type: string
        months:
          type: number
          format: int32
    DonationCancelRequest:
      type: object
      properties:
        id:
          type: number
          format: int32
    UpdateMobileOtpRequest:
      type: object
      properties:
        mobileNumber:
          type: string
    UpdateEmailOtpRequest:
      type: object
      properties:
        email:
          type: string
    UpdateProfileSubmitRequest:
      type: object
      properties:
        transactionId:
          type: string
        otp:
          type: string
    UpdateSingatureSubmitRequest:
      type: object
      properties:
        transactionId:
          type: string
    UpdateStepProfileResponse:
      type: object
      properties:
        transactionId:
          type: string
    UserAcknowledgement:
      type: object
      properties:
        textBase:
          type: array
          items:
            $ref: '#/components/schemas/AcknowledgementItem'
        onlineBase:
          type: array
          items:
            $ref: '#/components/schemas/AcknowledgementItem'
        interactiveBase:
          type: array
          items:
            $ref: '#/components/schemas/AcknowledgementItem'
        pdfBase:
          type: array
          items:
            $ref: '#/components/schemas/AcknowledgementItem'
    AcknowledgementItem:
      type: object
      properties:
        agreementId:
          type: string
        title:
          type: string
        versionNo:
          type: number
          format: int32
        acceptedOn:
          type: string
          format: date
    AcknowledgementDetails:
      type: object
      properties:
        title:
          type: string
        versionNo:
          type: number
          format: int32
        acceptedOn:
          type: string
          format: date
        htmlContent:
          type: string
        url:
          type: string
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT